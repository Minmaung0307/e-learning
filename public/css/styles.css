:root{
  --bg:#0b0d10;
  --fg:#e5e7eb;
  --muted:#94a3b8;
  --brand:#7ad3ff;
  --border:#1f2937;
  --card:#111827;
  --ok:#10b981;
  --warn:#f59e0b;
  --danger:#ef4444;

  /* live-adjusted via JS */
  --base-font-size: 16px;
}

*{box-sizing:border-box}
html,body{height:100%}
html{font-size:var(--base-font-size)}
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-size:1rem;
}
img{max-width:100%;display:block}

.hidden{display:none}
.clickable{cursor:pointer}

/* Layout */
.app{display:grid; grid-template-columns:260px 1fr; min-height:100vh}
.sidebar{background:#0f172a; border-right:1px solid var(--border); display:flex; flex-direction:column}
.brand{display:flex; gap:10px; align-items:center; padding:14px 12px; border-bottom:1px solid var(--border); cursor:pointer}
.brand .logo{width:32px;height:32px;border-radius:10px;background:#0c1626;display:grid;place-items:center;overflow:hidden}
.brand .logo img{width:100%;height:100%;object-fit:cover}
.brand .title{font-weight:800}
.nav{padding:8px}
.nav .item{display:flex; gap:10px; align-items:center; padding:10px 12px; border-radius:10px; cursor:pointer}
.nav .item:hover{background:#0b1220}
.nav .item.active{background:#10233a; outline:1px solid #153654}
.footer{margin-top:auto; padding:10px 12px; border-top:1px solid var(--border); display:flex; justify-content:space-between; align-items:center}

.topbar{display:flex; gap:12px; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--border); background:linear-gradient(180deg, rgba(16,24,40,.6), rgba(16,24,40,.3))}
.main{padding:12px; max-width:1200px}

.search-inline{display:flex; align-items:center; gap:8px; width:42%; position:relative}
.search-results{display:none; position:absolute; top:36px; left:0; background:#0f172a; border:1px solid var(--border); border-radius:12px; padding:6px; width:100%; max-height:50vh; overflow:auto; z-index:40}
.search-results.active{display:block}
.search-results .row{padding:8px; border-radius:10px; cursor:pointer}
.search-results .row:hover{background:#0b1220}

/* Cards, inputs, buttons */
.card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 0 0 1px rgba(255,255,255,0.02) inset}
.card-body{padding:12px}
.input{width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--border); background:#0b1220; color:var(--fg)}
.btn{background:#1e293b; color:var(--fg); border:1px solid var(--border); border-radius:12px; padding:8px 12px; cursor:pointer}
.btn:hover{background:#223047}
.btn.ghost{background:transparent}
.btn.ok{background:rgba(16,185,129,.15); border-color:#065f46}
.btn.secondary{background:linear-gradient(90deg,#2cc5e3,#7ad3ff); color:#0b0d10; border-color:transparent}
.btn.danger{background:rgba(239,68,68,.15); border-color:#7f1d1d}

.grid{display:grid; gap:10px}
.grid.cols-2{grid-template-columns:repeat(2,1fr)}
.grid.cols-3{grid-template-columns:repeat(3,1fr)}
.grid.cols-4{grid-template-columns:repeat(4,1fr)}

.table-wrap{overflow:auto}
.table{width:100%; border-collapse:collapse}
.table th,.table td{border-bottom:1px solid var(--border); padding:8px}
.table .num{text-align:right}

.muted{color:var(--muted)}
.badge{padding:6px 10px; border-radius:999px; background:#0b1220; border:1px solid var(--border); font-size:.75rem}

.notification{position:fixed; left:50%; transform:translateX(-50%); bottom:-60px; background:#0b1220; border:1px solid var(--border); padding:10px 14px; border-radius:12px; transition:all .2s; z-index:60}
.notification.show{bottom:16px}
.notification.ok{border-color:#065f46}
.notification.warn{border-color:#8a6a10}
.notification.danger{border-color:#7f1d1d}

/* Modal */
.modal{position:fixed; inset:0; display:none; z-index:50}
.modal.active{display:block}
.modal .dialog{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:min(920px,96vw); max-height:80vh; background:#0f172a; border:1px solid var(--border); border-radius:16px; display:flex; flex-direction:column}
.modal .dialog .head{padding:10px 12px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:8px; justify-content:space-between}
.modal .dialog .body{padding:12px; overflow:auto}
.modal .dialog .foot{padding:10px 12px; border-top:1px solid var(--border); display:flex; gap:8px; justify-content:flex-end}
.modal-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter: blur(2px); display:none; z-index:45}
.modal-backdrop.active{display:block}

/* Login */
.login-page{display:grid; place-items:center; min-height:100vh; padding:16px}
.login-card{width:min(420px,96vw)}

/* Sidebar mobile */
@media (max-width: 960px){
  .app{grid-template-columns:1fr}
  .sidebar{position:fixed; inset:0 30% 0 0; transform:translateX(-100%); transition:transform .18s; z-index:55}
  .sidebar-open .sidebar{transform:none}
  #backdrop{position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; z-index:54}
  .sidebar-open #backdrop{display:block}
  .grid.cols-4{grid-template-columns:repeat(2,1fr)}
}

/* Search highlight & tasks */
.highlight{outline:2px solid var(--brand); background:linear-gradient(0deg, rgba(122,211,255,.12), transparent)}
.lane-row.drop{outline:2px dashed #0ea5e9; background:rgba(14,165,233,.08); border-radius:12px}