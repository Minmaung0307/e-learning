:root{
  --bg:#0b0d10; --panel:#12151c; --muted:#8b98a5; --text:#e8eef5; --border:#1f2530;
  --brand:#7ad3ff; --brand-2:#2cc5e3; --ok:#10b981; --warn:#f59e0b; --danger:#ef4444;
  --card:#0f131a; --chip:#101821;
  --shadow:0 10px 25px rgba(0,0,0,.35);
  --radius:14px;
  --fontSize:16px;
}
/* Themes */
[data-theme="sunrise"]{ --brand:#7ad3ff; --brand-2:#2cc5e3; }
[data-theme="ocean"]{ --brand:#60a5fa; --brand-2:#22d3ee; }
[data-theme="forest"]{ --brand:#34d399; --brand-2:#22c55e; }
[data-theme="plum"]{ --brand:#a78bfa; --brand-2:#f472b6; }
[data-theme="fire"]{ --brand:#fb923c; --brand-2:#f43f5e; }
[data-theme="dark"]{ --brand:#9ca3af; --brand-2:#6b7280; }

[data-font="small"]{ --fontSize:14px; }
[data-font="medium"]{ --fontSize:16px; }
[data-font="large"]{ --fontSize:18px; }

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:500 var(--fontSize)/1.45 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial}
a{color:var(--brand);text-decoration:none}
a:hover{text-decoration:underline}

/* Layout */
.app{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
.sidebar{background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column}
.brand{display:flex;gap:10px;align-items:center;padding:16px;border-bottom:1px solid var(--border);cursor:pointer}
.brand .logo{width:36px;height:36px;border-radius:10px;overflow:hidden;background:linear-gradient(135deg,var(--brand-2),var(--brand));display:grid;place-items:center;box-shadow:var(--shadow)}
.brand .logo img{width:100%;height:100%;object-fit:cover}
.brand .title{font-weight:800;letter-spacing:.3px}

.nav{padding:8px}
.nav .item{display:flex;gap:10px;align-items:center;padding:10px 12px;border-radius:10px;cursor:pointer}
.nav .item i{font-size:18px}
.nav .item:hover{background:rgba(255,255,255,.04)}
.nav .item.active{background:linear-gradient(90deg,rgba(122,211,255,.16),rgba(44,197,227,.06));border:1px solid rgba(122,211,255,.25)}
.nav .item.hidden{display:none}

.sidebar .footer{margin-top:auto;padding:12px;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:center;color:var(--muted)}

.topbar{position:sticky;top:0;z-index:10;background:var(--panel);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:10px}
.search-inline{display:flex;gap:8px;align-items:center;flex:1;max-width:640px;margin:0 12px}
.search-inline .input{width:100%}

.main{padding:14px;}

/* Mobile sidebar */
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none}
.backdrop.active{display:block}
@media (max-width:900px){
  .app{grid-template-columns:1fr}
  .sidebar{position:fixed;inset:0 35% 0 0;transform:translateX(-100%);transition:.25s;z-index:20}
  .sidebar-open .sidebar{transform:translateX(0)}
}

/* Cards, tables, etc */
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
.card-body{padding:14px}
.clickable{cursor:pointer}
.grid{display:grid;gap:12px}
.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}
@media (max-width:1100px){ .cols-4{grid-template-columns:repeat(2,minmax(0,1fr))} }
@media (max-width:720px){ .cols-2,.cols-4{grid-template-columns:1fr} }

.table-wrap{overflow:auto}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
.table .num{text-align:right}

.input{background:#0f141c;border:1px solid var(--border);border-radius:10px;padding:10px;color:var(--text);outline:none}
.input:focus{border-color:var(--brand)}
textarea.input{min-height:110px;resize:vertical}

.btn{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#0b0d10;border:0;border-radius:10px;padding:10px 12px;cursor:pointer;font-weight:800}
.btn.ghost{background:transparent;color:var(--text);border:1px solid var(--border)}
.btn.secondary{background:linear-gradient(90deg,rgba(122,211,255,.16),rgba(44,197,227,.06));color:var(--text);border:1px solid rgba(122,211,255,.25)}
.btn.danger{background:linear-gradient(90deg,#ef4444,#b91c1c);color:#fff;border:0}
.btn.ok{background:linear-gradient(90deg,#22c55e,#16a34a);color:#fff}

.badge{background:var(--chip);border:1px solid var(--border);border-radius:999px;padding:8px 10px;display:flex;align-items:center;gap:6px}

/* Search results dropdown */
.search-results{position:absolute;margin-top:46px;background:var(--panel);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);width:min(600px,calc(100% - 24px));display:none;max-height:300px;overflow:auto;z-index:15}
.search-results.active{display:block}
.search-results .row{padding:10px 12px;border-bottom:1px solid var(--border);cursor:pointer}
.search-results .row:hover{background:rgba(255,255,255,.04)}

/* Notification */
.notification{position:fixed;right:14px;bottom:14px;background:#0f131a;border:1px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text);box-shadow:var(--shadow);opacity:0;transform:translateY(12px);transition:.2s}
.notification.show{opacity:1;transform:translateY(0)}
.notification.ok{border-color:rgba(16,185,129,.6)}
.notification.warn{border-color:rgba(245,158,11,.6)}
.notification.danger{border-color:rgba(239,68,68,.6)}

/* Modal (Close on right) */
.modal{position:fixed;inset:0;display:none;place-items:center;z-index:30}
.modal.active{display:grid}
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:25}
.modal-backdrop.active{display:block}
.dialog{width:min(860px,94vw);max-height:86vh;background:var(--panel);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);display:flex;flex-direction:column}
.dialog .head{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);padding:10px 12px}
.dialog .body{padding:12px;overflow:auto}
.dialog .foot{border-top:1px solid var(--border);padding:10px 12px;display:flex;justify-content:flex-end;gap:8px}

/* Highlight search target */
.highlight{outline:2px solid var(--brand);background:linear-gradient(0deg,rgba(122,211,255,.08),transparent)}

/* Tasks lane & drop state */
.lane-row.drop{box-shadow:0 0 0 2px var(--brand) inset;background:rgba(122,211,255,.06)}
.task-card.dragging{opacity:.65}

/* Login page centered */
.login-page{display:grid;place-items:center;min-height:100vh;padding:20px}
.login-card{width:min(460px,96vw)}

/* Mini chips for dashboard */
.chip{display:inline-flex;align-items:center;gap:6px;background:var(--chip);border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:12px}