/* ===== Base tokens (Themes) ===== */
/* --- Sunrise (Default) --- */
:root, .theme-sunrise{
  --bg:#0b0d10; --panel:#12161b; --text:#e9eef5; --muted:#9db0c5;
  --primary:#7ad3ff; --primary-2:#35a4df; --ok:#10b981; --warn:#f59e0b; --danger:#ef4444;
  --border:#22303f; --on-primary:#001018; --on-ok:#001a10; --on-danger:#ffffff;
  --tint-8:rgba(122,211,255,.08); --tint-15:rgba(122,211,255,.15); --tint-25:rgba(122,211,255,.25);
  --page-glow-a: rgba(122,211,255,.10); --page-glow-b: rgba(34,197,94,.10);
  --sb-collapsed-width: 76px; --sb-expanded-width: 256px;
}
/* --- Other Themes --- */
.theme-light{ --bg:#f6f8fb; --panel:#ffffff; --text:#0b0d10; --muted:#5f6e7b; --primary:#3b82f6; --primary-2:#2563eb; --border:#e5eaf0; --on-primary:#ffffff; --on-ok:#ffffff; --on-danger:#ffffff; --tint-8:rgba(59,130,246,.12); --tint-15:rgba(59,130,246,.22); --tint-25:rgba(59,130,246,.35); --page-glow-a:rgba(59,130,246,.14); --page-glow-b:rgba(16,185,129,.14); }
.theme-dark{ --bg:#0b0d10; --panel:#12161b; --text:#e9eef5; --muted:#9db0c5; --primary:#7ad3ff; --primary-2:#35a4df; --border:#22303f; --on-primary:#001018; --on-ok:#001a10; --on-danger:#ffffff; --tint-8:rgba(122,211,255,.12); --tint-15:rgba(122,211,255,.22); --tint-25:rgba(122,211,255,.35); --page-glow-a:rgba(122,211,255,.12); --page-glow-b:rgba(52,211,153,.12); }
/* ... (other theme styles can remain the same) ... */

/* ===== Global / Reset ===== */
*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html,body{ margin:0; height:100%; background:var(--bg); color:var(--text); font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; -webkit-text-size-adjust:100%; }
a{ color:var(--primary); text-decoration:none }
img{ max-width:100%; display:block; }
.font-small{ font-size:13px } .font-medium{ font-size:15px } .font-large{ font-size:17px }
.hidden{ display:none !important; }

/* ===== App Shell Layout ===== */
.app { position: relative; }

/* --- 1. Main Content Wrapper (contains topbar, hero, main) --- */
.main-wrapper {
    transition: margin-left .25s ease;
    width: 100%;
}

/* --- 2. Sidebar --- */
.sidebar {
    background: var(--panel);
    border-right: 1px solid var(--border);
    height: 100vh;
    display: flex;
    flex-direction: column;
    z-index: 1000;
    transition: width .25s ease, transform .25s ease;
}
.brand{ display:flex; align-items:center; gap:10px; padding:14px; border-bottom:1px solid var(--border); flex-shrink: 0; }
.brand .logo img{ width:28px; height:28px }
.brand .title{ font-weight:800; white-space:nowrap; }
.nav{ padding:8px; overflow: auto; }
.nav .item{ display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; cursor:pointer; user-select:none; }
.nav .item:hover{ background:var(--tint-8) }
.nav .item.active{ background:var(--tint-15); outline:1px dashed var(--tint-25) }
.nav .item.hidden{ display:none }
.nav .item i{ font-size:18px; flex-shrink: 0; }
.nav .item span { white-space: nowrap; }
.footer{ margin-top:auto; padding:10px 12px; border-top:1px solid var(--border); flex-shrink: 0; }
#backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:999; display:none; }
#backdrop.active{ display:block; }

/* --- 3. Topbar --- */
.topbar{ position:sticky; top:0; z-index:10; background:var(--panel); border-bottom:1px solid var(--border); padding:calc(10px + env(safe-area-inset-top)) 12px 10px 12px; display:flex; align-items:center; justify-content:space-between; gap:10px; }
.search-inline{ flex:1; display:flex; gap:8px; align-items:center; max-width:680px }
.search-inline .input{ width:100% }

/* --- 4. Page Hero & Main --- */
.page-hero{ display:flex; align-items:center; gap:12px; padding:14px 16px; background:linear-gradient(180deg, rgba(255,255,255,.04), transparent 60%); }
.page-hero i{ font-size:22px; opacity:.9 }
.page-hero .t{ font-weight:800 }
.page-hero .s{ color:var(--muted); font-size:12px }
.main{ padding: 12px; }

/* ===== Desktop & Tablet Layout (Hover Sidebar) ===== */
@media (min-width: 768px) {
    .app { display: flex; }
    .sidebar {
        position: fixed;
        left: 0; top: 0;
        width: var(--sb-collapsed-width);
    }
    .sidebar:hover {
        width: var(--sb-expanded-width);
    }
    .sidebar .title, .sidebar .nav .item span, .footer {
        opacity: 0;
        pointer-events: none;
        transition: opacity .18s ease;
    }
    .sidebar:hover .title, .sidebar:hover .nav .item span, .sidebar:hover .footer {
        opacity: 1;
        pointer-events: auto;
    }
    .main-wrapper {
        margin-left: var(--sb-collapsed-width);
        width: calc(100% - var(--sb-collapsed-width));
    }
    #burger { display: none; }
}

/* ===== Mobile Layout (Drawer Sidebar) ===== */
@media (max-width: 767.98px) {
    .sidebar {
        position: fixed;
        left: 0; top: 0;
        width: var(--sb-expanded-width);
        transform: translateX(-100%);
    }
    body.sidebar-open .sidebar {
        transform: translateX(0);
    }
    .main-wrapper {
        margin-left: 0;
        width: 100%;
    }
}

/* ===== Modern Course Card Design ===== */
.courses-grid {
    display: grid;
    gap: 18px;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}
.course-card {
    display: flex;
    flex-direction: column;
    min-height: 450px; /* Uniform height */
    border-radius: 16px;
    overflow: hidden;
    cursor: pointer;
    transition: transform .2s ease, box-shadow .2s ease;
    color: #0b1220 !important; /* High contrast text for all cards */
}
.course-card:hover {
    transform: translateY(-4px);
}
/* Varied shadows for depth */
.course-card:nth-child(3n+1) { box-shadow: 0 8px 25px rgba(14,165,233,.15); }
.course-card:nth-child(3n+2) { box-shadow: 0 8px 25px rgba(17,24,39,.12); }
.course-card:nth-child(3n+3) { box-shadow: 0 8px 25px rgba(244,114,182,.15); }
.course-card:hover:nth-child(3n+1) { box-shadow: 0 12px 35px rgba(14,165,233,.25); }
.course-card:hover:nth-child(3n+2) { box-shadow: 0 12px 35px rgba(17,24,39,.20); }
.course-card:hover:nth-child(3n+3) { box-shadow: 0 12px 35px rgba(244,114,182,.25); }
/* Dynamic, subtle gradients for backgrounds */
.course-card:nth-child(6n+1){ background-image: linear-gradient(135deg, #eef2ff, #e0f2fe); }
.course-card:nth-child(6n+2){ background-image: linear-gradient(135deg, #fff7ed, #fef3c7); }
.course-card:nth-child(6n+3){ background-image: linear-gradient(135deg, #fdf2f8, #e9d5ff); }
.course-card:nth-child(6n+4){ background-image: linear-gradient(135deg, #ecfeff, #f0fdf4); }
.course-card:nth-child(6n+5){ background-image: linear-gradient(135deg, #faf5ff, #eef2ff); }
.course-card:nth-child(6n+6){ background-image: linear-gradient(135deg, #fffbeb, #fef2f2); }
/* --- Card Image (No Cropping) --- */
.course-card .img {
    height: 180px;
    background: rgba(0,0,0,.05);
    display: flex;
    align-items: center;
    justify-content: center;
}
.course-card .img img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* This is the key change */
}
/* --- Card Body Layout --- */
.course-card .card-body {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Allows the footer to stick to the bottom */
    padding: 12px 14px;
}
.course-card .header { display: flex; justify-content: space-between; align-items: flex-start; gap: 8px; }
.course-card .title { font-weight: 800; font-size: 16px; line-height: 1.3; }
.course-card .badge { background: rgba(255,255,255,.7); border: 1px solid rgba(0,0,0,.06); flex-shrink: 0; }
.course-card .summary { margin-top: 8px; font-size: 13px; color: rgba(11,18,32,.8); }
.course-card .meta {
    margin-top: auto; /* Pushes this to the bottom */
    padding-top: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.course-card .price { font-weight: 800; font-size: 17px; }
.course-card .btn.cta { background: #0b1220; color: #fff; border-radius: 10px; }

/* ===== Modal & In-Page Course Detail View ===== */
.modal .dialog { background: var(--panel); }
/* --- When a course is opened (sheet-mode) --- */
#m-modal.sheet-mode .dialog {
    position: fixed;
    inset: 0;
    width: 100vw; height: 100vh;
    max-width: none; max-height: none;
    border-radius: 0;
    transform: translateY(100%);
    opacity: 0;
    transition: transform .3s cubic-bezier(.2, .8, .2, 1), opacity .3s;
}
#m-modal.active.sheet-mode .dialog {
    transform: translateY(0);
    opacity: 1;
}
#m-modal.sheet-mode .head {
    position: sticky; top: 0; z-index: 2;
    padding: 10px 12px;
    background: linear-gradient(180deg, var(--panel), transparent);
    backdrop-filter: blur(8px);
}
/* Hide thumbnail and use full width for content */
#m-modal.sheet-mode .course-full { grid-template-columns: 1fr !important; }
#m-modal.sheet-mode .course-full > div:first-child { display: none !important; }
/* Adaptive text colors for themed detail pages */
.dialog.theme-text-dark, .dialog.theme-text-dark * { color: #0b1220 !important; }
.dialog.theme-text-dark .muted { color: rgba(11,18,32,.7) !important; }
.dialog.theme-text-light, .dialog.theme-text-light * { color: #ffffff !important; }
.dialog.theme-text-light .muted { color: rgba(255,255,255,.8) !important; }
/* Inner sections should be solid for readability */
#m-modal.sheet-mode .section-box, #m-modal.sheet-mode #paypal-zone {
    background: rgba(255,255,255,.9) !important;
    border: 1px solid rgba(0,0,0,.1);
    border-radius: 12px;
    padding: 12px;
}
/* Dynamic background colors for detail page */
.dialog.bg-grad-1{ background-image: linear-gradient(135deg, #eef2ff, #e0f2fe); }
.dialog.bg-grad-2{ background-image: linear-gradient(135deg, #fff7ed, #fef3c7); }
.dialog.bg-grad-3{ background-image: linear-gradient(135deg, #fdf2f8, #e9d5ff); }
/* ... add more if needed */

/* Other remaining styles (buttons, inputs, tables etc.) */
.card{ background:var(--panel); border:1px solid var(--border); border-radius:16px; box-shadow:0 1px 0 rgba(0,0,0,.25) }
.btn{ background:var(--primary); color:var(--on-primary); border:none; border-radius:12px; padding:8px 12px; font-weight:700; cursor:pointer }
/* ... (Keep your other component styles like .input, .table, etc. here) ... */